"use strict";(self.webpackChunkperiscope=self.webpackChunkperiscope||[]).push([[4122],{2969:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"QueryGen/API","title":"Accessing via API","description":"The Query Generation API channel allows you to integrate Periscope\'s AI-powered query generation capabilities directly into your applications through RESTful endpoints. This section covers:","source":"@site/docs/QueryGen/API.md","sourceDirName":"QueryGen","slug":"/QueryGen/API","permalink":"/docs/QueryGen/API","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Angular","permalink":"/docs/channels/WebAngular"},"next":{"title":"Chart Visualization","permalink":"/docs/QueryGen/charts"}}');var t=s(4848),i=s(8453);const o={sidebar_position:2},a="Accessing via API",l={},c=[{value:"Overview",id:"overview",level:2},{value:"Sending a Query Generation Request",id:"sending-a-query-generation-request",level:2},{value:"Metadata and Query Filters",id:"metadata-and-query-filters",level:3},{value:"Topics",id:"topics",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"accessing-via-api",children:"Accessing via API"})}),"\n",(0,t.jsx)(n.p,{children:"The Query Generation API channel allows you to integrate Periscope's AI-powered query generation capabilities directly into your applications through RESTful endpoints. This section covers:"}),"\n",(0,t.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsxs)(n.p,{children:["The Query Generation API channel provides a simple way to send requests to Periscope's AI system to generate queries programmatically. When you send a message through the API:\nFor information on how to set up the API channel, please refer to the ",(0,t.jsx)(n.a,{href:"../../channels/API/API.md",children:"API Channel Setup Guide"}),"."]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"The system immediately returns a 200 status code to acknowledge that your message has been successfully queued."}),"\n",(0,t.jsx)(n.li,{children:"Your message is processed asynchronously by the AI system."}),"\n",(0,t.jsxs)(n.li,{children:["Once processing is complete, the generated query or response is sent to your configured webhook endpoint.","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"If no webhook is configured, you won't receive the AI's response."}),"\n",(0,t.jsxs)(n.li,{children:["See ",(0,t.jsx)(n.a,{href:"../../channels/API/response-webhook.md",children:"Response Webhook"})," for setup instructions."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Any metadata object included in your API request will be returned unchanged with the response.","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"This allows you to maintain context between your request and response."}),"\n",(0,t.jsxs)(n.li,{children:["For details on metadata handling, see ",(0,t.jsx)(n.a,{href:"../../channels/API/response-webhook.md",children:"Response Webhook"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"sending-a-query-generation-request",children:"Sending a Query Generation Request"}),"\n",(0,t.jsxs)(n.p,{children:["You can send a query generation request using a ",(0,t.jsx)(n.code,{children:"POST"})," request to the ",(0,t.jsx)(n.code,{children:"/api-channel"})," endpoint."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example Request:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'curl -X POST \'https://dingg.periscopechat.com/api-channel\' \\\n  -H \'Content-Type: application/json\' \\\n  -H \'Authorization: Bearer <your-api-key>\' \\\n  -d \'{\n    "channel_id": "<channel-id>",\n    "user": {\n      "identity": "<user-id>",\n      "name": "<user-name>"\n    },\n    "message": "Show me total sales for last month",\n    "metadata": {\n      "query_filters": [{\n        "table_name": "<table-name>",\n        "column_name": "<column-name>",\n        "values": "<value or comma-separated-values>"\n      },{\n        "table_name": "<another-table-name>",\n        "column_name": "<another-column-name>",\n        "values": "<another-value>"\n      }]\n    }\n  }\'\n'})}),"\n",(0,t.jsx)(n.h3,{id:"metadata-and-query-filters",children:"Metadata and Query Filters"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"metadata"})," object in your request is returned unchanged in the response. For query generation, you can include a ",(0,t.jsx)(n.code,{children:"query_filters"})," array within the ",(0,t.jsx)(n.code,{children:"metadata"})," object. This allows you to specify filters that the AI should apply when generating the query."]}),"\n",(0,t.jsxs)(n.p,{children:["Each object in the ",(0,t.jsx)(n.code,{children:"query_filters"})," array should define:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"table_name"}),": The name of the table to filter on."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"column_name"}),": The name of the column in that table to filter."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"values"}),": The value(s) to filter by. For multiple values, provide them as a comma-separated string."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"This enables more precise and context-aware query generation."}),"\n",(0,t.jsx)(n.h2,{id:"topics",children:"Topics"}),"\n",(0,t.jsx)(n.p,{children:"Many concepts from the general API channel apply here. You can refer to the following topics for more details:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"../../channels/API/api-keys.md",children:"API Keys"})," - Manage authentication and access control."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"../../channels/API/response-webhook.md",children:"Response Webhook"})," - Configure webhook endpoints for asynchronous responses."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["For specifics on sending messages and understanding the request/response structure beyond the example above, please refer to the general ",(0,t.jsx)(n.a,{href:"../../channels/API/sending-messages.md",children:"Sending Messages"})," documentation, keeping in mind the ",(0,t.jsx)(n.code,{children:"query_filters"})," addition for query generation."]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>a});var r=s(6540);const t={},i=r.createContext(t);function o(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);